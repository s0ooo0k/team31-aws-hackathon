# Agent í…ŒìŠ¤íŠ¸ ê²°ê³¼

## í…ŒìŠ¤íŠ¸ #1: ProductManager

**ëª…ë ¹ì–´:** `@ProductManager ì˜ì–´ ì´ˆê¸‰ìë¥¼ ìœ„í•œ ì´ë¯¸ì§€ ê¸°ë°˜ í•™ìŠµ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ 3ê°œ ë§Œë“¤ì–´ì£¼ì„¸ìš”.`

**ê²°ê³¼:**

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì¹´í˜ì—ì„œ ì£¼ë¬¸í•˜ê¸° (Ordering at a Cafe)

**í•™ìŠµ ëª©í‘œ:** ê¸°ë³¸ì ì¸ ìŒì‹/ìŒë£Œ ì£¼ë¬¸ í‘œí˜„ ìµíˆê¸°
**ë‚œì´ë„:** ì´ˆê¸‰ (A1-A2)

**ì´ë¯¸ì§€ ì„¤ëª…:** ì¹´í˜ ì¹´ìš´í„° ì•ì— ì„œ ìˆëŠ” ê³ ê°ê³¼ ë°”ë¦¬ìŠ¤íƒ€
**í•µì‹¬ í‘œí˜„:**
- "I'd like a coffee, please."
- "Can I have a sandwich?"
- "How much is it?"
- "Thank you!"

**ê²Œì„ ìš”ì†Œ:**
- ì •í™•í•œ ì£¼ë¬¸ ì™„ë£Œ ì‹œ +10ì 
- ì ì ˆí•œ ì˜ˆì˜ í‘œí˜„ ì‚¬ìš© ì‹œ +5ì  ë³´ë„ˆìŠ¤
- 3ë²ˆì˜ ê¸°íšŒ ì œê³µ

**í‰ê°€ ê¸°ì¤€:**
- ë°œìŒ ì •í™•ë„ (40%)
- ë¬¸ë²• ì •í™•ì„± (30%)
- ìƒí™© ì ì ˆì„± (30%)

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê¸¸ ë¬»ê¸° (Asking for Directions)

**í•™ìŠµ ëª©í‘œ:** ìœ„ì¹˜ ë° ë°©í–¥ ê´€ë ¨ ê¸°ë³¸ í‘œí˜„ í•™ìŠµ
**ë‚œì´ë„:** ì´ˆê¸‰ (A1-A2)

**ì´ë¯¸ì§€ ì„¤ëª…:** ê±°ë¦¬ì—ì„œ ì§€ë„ë¥¼ ë³´ê³  ìˆëŠ” ê´€ê´‘ê°
**í•µì‹¬ í‘œí˜„:**
- "Excuse me, where is the subway station?"
- "How do I get to the museum?"
- "Is it far from here?"
- "Turn left/right"

**ê²Œì„ ìš”ì†Œ:**
- ì˜¬ë°”ë¥¸ ì§ˆë¬¸ í˜•íƒœ ì‚¬ìš© ì‹œ +15ì 
- ì˜ˆì˜ ë°”ë¥¸ ì‹œì‘/ë§ˆë¬´ë¦¬ í‘œí˜„ ì‹œ +5ì 
- íŒíŠ¸ ê¸°ëŠ¥ ì œê³µ (ì ìˆ˜ -2ì )

**í‰ê°€ ê¸°ì¤€:**
- ì˜ì‚¬ì†Œí†µ ëª…í™•ì„± (50%)
- ì–´íœ˜ ì‚¬ìš© ì •í™•ë„ (25%)
- ë°œìŒ (25%)

---

### ì‹œë‚˜ë¦¬ì˜¤ 3: ìê¸°ì†Œê°œí•˜ê¸° (Self Introduction)

**í•™ìŠµ ëª©í‘œ:** ê¸°ë³¸ì ì¸ ê°œì¸ ì •ë³´ ì†Œê°œ ë° ì§ˆë¬¸í•˜ê¸°
**ë‚œì´ë„:** ì´ˆê¸‰ (A1)

**ì´ë¯¸ì§€ ì„¤ëª…:** ìƒˆë¡œìš´ ì§ì¥ì´ë‚˜ í•™êµì—ì„œ ë§Œë‚˜ëŠ” ë‘ ì‚¬ëŒ
**í•µì‹¬ í‘œí˜„:**
- "Hi, I'm [name]. Nice to meet you."
- "I'm from Korea."
- "What's your name?"
- "Where are you from?"

**ê²Œì„ ìš”ì†Œ:**
- ì™„ì „í•œ ìê¸°ì†Œê°œ ì™„ì„± ì‹œ +20ì 
- ìƒëŒ€ë°©ì—ê²Œ ì§ˆë¬¸í•˜ê¸° +10ì 
- ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™” íë¦„ +5ì  ë³´ë„ˆìŠ¤

**í‰ê°€ ê¸°ì¤€:**
- ì •ë³´ ì „ë‹¬ ì™„ì„±ë„ (40%)
- ìƒí˜¸ì‘ìš© ì ê·¹ì„± (35%)
- ì–¸ì–´ ì •í™•ì„± (25%)

---

**ê³µí†µ í”¼ë“œë°± ì‹œìŠ¤í…œ:**
- ì‹¤ì‹œê°„ ë°œìŒ êµì • ì œì•ˆ
- ë” ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„ ëŒ€ì•ˆ ì œì‹œ
- ë¬¸í™”ì  ë§¥ë½ ì„¤ëª… í¬í•¨
- ë‹¤ìŒ ë ˆë²¨ í•™ìŠµ ê²½ë¡œ ì•ˆë‚´

**ì§„í–‰ ë°©ì‹:**
1. ì´ë¯¸ì§€ ì œì‹œ ë° ìƒí™© ì„¤ëª… (30ì´ˆ)
2. í•™ìŠµì ì‘ë‹µ (60ì´ˆ)
3. AI í”¼ë“œë°± ë° ê°œì„ ì  ì œì‹œ (30ì´ˆ)
4. ì¬ë„ì „ ê¸°íšŒ ì œê³µ

---

**í…ŒìŠ¤íŠ¸ ìƒíƒœ:** âœ… ì™„ë£Œ

---

## í…ŒìŠ¤íŠ¸ #2: Developer

**ëª…ë ¹ì–´:** `@Developer ìŒì„± ë…¹ìŒ ë²„íŠ¼ì´ ìˆëŠ” ê°„ë‹¨í•œ React ì»´í¬ë„ŒíŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.`

**ê²°ê³¼:**

### VoiceRecorder ì»´í¬ë„ŒíŠ¸

```jsx
import React, { useState, useRef } from 'react';
import './VoiceRecorder.css';

const VoiceRecorder = ({ onRecordingComplete }) => {
  const [isRecording, setIsRecording] = useState(false);
  const [audioBlob, setAudioBlob] = useState(null);
  const [duration, setDuration] = useState(0);
  const mediaRecorderRef = useRef(null);
  const timerRef = useRef(null);

  const startRecording = async () => {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      const mediaRecorder = new MediaRecorder(stream);
      const chunks = [];

      mediaRecorder.ondataavailable = (event) => {
        chunks.push(event.data);
      };

      mediaRecorder.onstop = () => {
        const blob = new Blob(chunks, { type: 'audio/wav' });
        setAudioBlob(blob);
        onRecordingComplete?.(blob);
        stream.getTracks().forEach(track => track.stop());
      };

      mediaRecorderRef.current = mediaRecorder;
      mediaRecorder.start();
      setIsRecording(true);
      
      // íƒ€ì´ë¨¸ ì‹œì‘
      timerRef.current = setInterval(() => {
        setDuration(prev => prev + 1);
      }, 1000);

    } catch (error) {
      console.error('ë§ˆì´í¬ ì ‘ê·¼ ì‹¤íŒ¨:', error);
      alert('ë§ˆì´í¬ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
    }
  };

  const stopRecording = () => {
    if (mediaRecorderRef.current && isRecording) {
      mediaRecorderRef.current.stop();
      setIsRecording(false);
      clearInterval(timerRef.current);
    }
  };

  const resetRecording = () => {
    setAudioBlob(null);
    setDuration(0);
  };

  const formatTime = (seconds) => {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  };

  return (
    <div className="voice-recorder">
      <div className="recorder-display">
        <div className="timer">{formatTime(duration)}</div>
        {isRecording && (
          <div className="recording-indicator">
            <span className="pulse">ğŸ”´</span> ë…¹ìŒ ì¤‘...
          </div>
        )}
      </div>

      <div className="recorder-controls">
        {!isRecording ? (
          <button 
            className="record-btn start" 
            onClick={startRecording}
            disabled={!!audioBlob}
          >
            ğŸ¤ ë…¹ìŒ ì‹œì‘
          </button>
        ) : (
          <button 
            className="record-btn stop" 
            onClick={stopRecording}
          >
            â¹ï¸ ë…¹ìŒ ì¤‘ì§€
          </button>
        )}
        
        {audioBlob && (
          <button 
            className="record-btn reset" 
            onClick={resetRecording}
          >
            ğŸ”„ ë‹¤ì‹œ ë…¹ìŒ
          </button>
        )}
      </div>

      {audioBlob && (
        <div className="audio-preview">
          <audio controls src={URL.createObjectURL(audioBlob)} />
        </div>
      )}
    </div>
  );
};

export default VoiceRecorder;
```

### CSS ìŠ¤íƒ€ì¼ (VoiceRecorder.css)

```css
.voice-recorder {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  background: #f9f9f9;
  max-width: 300px;
  margin: 0 auto;
}

.recorder-display {
  margin-bottom: 20px;
  text-align: center;
}

.timer {
  font-size: 24px;
  font-weight: bold;
  color: #333;
  margin-bottom: 10px;
}

.recording-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #d32f2f;
  font-weight: 500;
}

.pulse {
  animation: pulse 1s infinite;
}

@keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
}

.recorder-controls {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

.record-btn {
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.record-btn.start {
  background: #4caf50;
  color: white;
}

.record-btn.start:hover {
  background: #45a049;
}

.record-btn.stop {
  background: #f44336;
  color: white;
}

.record-btn.stop:hover {
  background: #da190b;
}

.record-btn.reset {
  background: #2196f3;
  color: white;
}

.record-btn.reset:hover {
  background: #1976d2;
}

.record-btn:disabled {
  background: #ccc;
  cursor: not-allowed;
}

.audio-preview {
  width: 100%;
}

.audio-preview audio {
  width: 100%;
}
```

### ì‚¬ìš© ì˜ˆì‹œ

```jsx
import React from 'react';
import VoiceRecorder from './components/VoiceRecorder';

function App() {
  const handleRecordingComplete = (audioBlob) => {
    console.log('ë…¹ìŒ ì™„ë£Œ:', audioBlob);
    
    // Nova Sonic APIë¡œ ì „ì†¡í•˜ëŠ” ë¡œì§
    const formData = new FormData();
    formData.append('audio', audioBlob, 'recording.wav');
    
    // API í˜¸ì¶œ ì˜ˆì‹œ
    // fetch('/api/process-audio', {
    //   method: 'POST',
    //   body: formData
    // });
  };

  return (
    <div className="App">
      <h1>Nova ì˜ì–´ í•™ìŠµ</h1>
      <VoiceRecorder onRecordingComplete={handleRecordingComplete} />
    </div>
  );
}

export default App;
```

### ì£¼ìš” ê¸°ëŠ¥

1. **ë§ˆì´í¬ ê¶Œí•œ ìš”ì²­** - getUserMedia API ì‚¬ìš©
2. **ì‹¤ì‹œê°„ ë…¹ìŒ ìƒíƒœ í‘œì‹œ** - íƒ€ì´ë¨¸ ë° ì‹œê°ì  ì¸ë””ì¼€ì´í„°
3. **ë…¹ìŒ ì œì–´** - ì‹œì‘/ì¤‘ì§€/ì¬ë…¹ìŒ ë²„íŠ¼
4. **ì˜¤ë””ì˜¤ ë¯¸ë¦¬ë³´ê¸°** - ë…¹ìŒëœ íŒŒì¼ ì¬ìƒ ê°€ëŠ¥
5. **ì½œë°± í•¨ìˆ˜** - ë…¹ìŒ ì™„ë£Œ ì‹œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ë°ì´í„° ì „ë‹¬

### ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­

- **ë¸Œë¼ìš°ì € í˜¸í™˜ì„±**: MediaRecorder API ì§€ì› í™•ì¸ í•„ìš”
- **HTTPS í•„ìˆ˜**: ë§ˆì´í¬ ì ‘ê·¼ì„ ìœ„í•´ ë³´ì•ˆ ì—°ê²° í•„ìš”
- **íŒŒì¼ í˜•ì‹**: WAV í˜•ì‹ìœ¼ë¡œ ë…¹ìŒ (Nova Sonic í˜¸í™˜)
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ë…¹ìŒ ì™„ë£Œ í›„ ìŠ¤íŠ¸ë¦¼ ì •ë¦¬
- **ì—ëŸ¬ ì²˜ë¦¬**: ë§ˆì´í¬ ê¶Œí•œ ê±°ë¶€ ì‹œ ì‚¬ìš©ì ì•ˆë‚´

**í…ŒìŠ¤íŠ¸ ìƒíƒœ:** âœ… ì™„ë£Œ

---

## í…ŒìŠ¤íŠ¸ #3: CloudOps

**ëª…ë ¹ì–´:** `@CloudOps Lambda í•¨ìˆ˜ì—ì„œ Nova Sonicì„ í˜¸ì¶œí•˜ëŠ” ê¸°ë³¸ êµ¬ì¡°ë¥¼ ì„¤ê³„í•´ì£¼ì„¸ìš”.`

**ê²°ê³¼:**

### AWS ì•„í‚¤í…ì²˜ ì„¤ê³„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   API Gateway    â”‚    â”‚   Lambda        â”‚
â”‚   (React)       â”‚â”€â”€â”€â–¶â”‚   /process-audio â”‚â”€â”€â”€â–¶â”‚   AudioProcessorâ”‚
â”‚                 â”‚    â”‚                  â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   S3 Bucket     â”‚    â”‚   Amazon Bedrock â”‚    â”‚   DynamoDB      â”‚
â”‚   Audio Files   â”‚â—€â”€â”€â”€â”‚   Nova Sonic     â”‚    â”‚   Session Data  â”‚
â”‚                 â”‚    â”‚                  â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Lambda í•¨ìˆ˜ êµ¬í˜„

#### 1. ë©”ì¸ í•¸ë“¤ëŸ¬ (index.js)

```javascript
const AWS = require('aws-sdk');
const { BedrockRuntimeClient, InvokeModelCommand } = require('@aws-sdk/client-bedrock-runtime');
const { S3Client, PutObjectCommand, GetObjectCommand } = require('@aws-sdk/client-s3');
const { DynamoDBClient, PutItemCommand } = require('@aws-sdk/client-dynamodb');

// AWS í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
const bedrockClient = new BedrockRuntimeClient({ region: process.env.AWS_REGION });
const s3Client = new S3Client({ region: process.env.AWS_REGION });
const dynamoClient = new DynamoDBClient({ region: process.env.AWS_REGION });

exports.handler = async (event) => {
    try {
        console.log('Received event:', JSON.stringify(event, null, 2));
        
        const { httpMethod, body, headers } = event;
        
        if (httpMethod !== 'POST') {
            return createResponse(405, { error: 'Method not allowed' });
        }
        
        // ë©€í‹°íŒŒíŠ¸ í¼ ë°ì´í„° íŒŒì‹±
        const audioData = await parseMultipartData(body, headers['content-type']);
        
        if (!audioData) {
            return createResponse(400, { error: 'No audio data found' });
        }
        
        // 1. S3ì— ì˜¤ë””ì˜¤ íŒŒì¼ ì €ì¥
        const audioKey = await uploadAudioToS3(audioData);
        
        // 2. Nova Sonicìœ¼ë¡œ ìŒì„± ì²˜ë¦¬
        const transcription = await processAudioWithNova(audioData);
        
        // 3. ì„¸ì…˜ ë°ì´í„° DynamoDB ì €ì¥
        await saveSessionData({
            sessionId: generateSessionId(),
            audioKey,
            transcription,
            timestamp: new Date().toISOString()
        });
        
        return createResponse(200, {
            success: true,
            transcription,
            audioKey,
            message: 'Audio processed successfully'
        });
        
    } catch (error) {
        console.error('Error processing audio:', error);
        return createResponse(500, {
            error: 'Internal server error',
            message: error.message
        });
    }
};

// Nova Sonic í˜¸ì¶œ í•¨ìˆ˜
async function processAudioWithNova(audioBuffer) {
    try {
        const modelId = 'amazon.nova-micro-v1:0'; // Nova Sonic ëª¨ë¸ ID
        
        const requestBody = {
            inputAudio: {
                format: 'wav',
                source: {
                    bytes: audioBuffer.toString('base64')
                }
            },
            inferenceConfig: {
                maxTokens: 1000,
                temperature: 0.7
            }
        };
        
        const command = new InvokeModelCommand({
            modelId,
            contentType: 'application/json',
            body: JSON.stringify(requestBody)
        });
        
        const response = await bedrockClient.send(command);
        const responseBody = JSON.parse(new TextDecoder().decode(response.body));
        
        return {
            text: responseBody.output?.text || '',
            confidence: responseBody.confidence || 0,
            processingTime: responseBody.processingTimeMs || 0
        };
        
    } catch (error) {
        console.error('Nova Sonic processing error:', error);
        throw new Error(`Nova processing failed: ${error.message}`);
    }
}

// S3 ì—…ë¡œë“œ í•¨ìˆ˜
async function uploadAudioToS3(audioBuffer) {
    const key = `audio/${Date.now()}-${Math.random().toString(36).substr(2, 9)}.wav`;
    
    const command = new PutObjectCommand({
        Bucket: process.env.S3_BUCKET_NAME,
        Key: key,
        Body: audioBuffer,
        ContentType: 'audio/wav',
        Metadata: {
            uploadTime: new Date().toISOString()
        }
    });
    
    await s3Client.send(command);
    return key;
}

// DynamoDB ì €ì¥ í•¨ìˆ˜
async function saveSessionData(data) {
    const command = new PutItemCommand({
        TableName: process.env.DYNAMODB_TABLE_NAME,
        Item: {
            sessionId: { S: data.sessionId },
            audioKey: { S: data.audioKey },
            transcription: { S: JSON.stringify(data.transcription) },
            timestamp: { S: data.timestamp },
            ttl: { N: Math.floor(Date.now() / 1000) + (7 * 24 * 60 * 60) } // 7ì¼ TTL
        }
    });
    
    await dynamoClient.send(command);
}

// ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
function createResponse(statusCode, body) {
    return {
        statusCode,
        headers: {
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*',
            'Access-Control-Allow-Methods': 'POST, OPTIONS',
            'Access-Control-Allow-Headers': 'Content-Type'
        },
        body: JSON.stringify(body)
    };
}

function generateSessionId() {
    return `session-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
}

async function parseMultipartData(body, contentType) {
    // ë©€í‹°íŒŒíŠ¸ ë°ì´í„° íŒŒì‹± ë¡œì§
    // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” multipart ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ê¶Œì¥
    const boundary = contentType.split('boundary=')[1];
    const parts = body.split(`--${boundary}`);
    
    for (const part of parts) {
        if (part.includes('Content-Type: audio/')) {
            const audioStart = part.indexOf('\r\n\r\n') + 4;
            return Buffer.from(part.substring(audioStart), 'binary');
        }
    }
    return null;
}
```

#### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
# Lambda í™˜ê²½ ë³€ìˆ˜
AWS_REGION=us-east-1
S3_BUCKET_NAME=nova-english-audio-bucket
DYNAMODB_TABLE_NAME=nova-sessions
BEDROCK_MODEL_ID=amazon.nova-micro-v1:0
MAX_AUDIO_SIZE=10485760  # 10MB
AUDIO_TIMEOUT=30000      # 30ì´ˆ
```

#### 3. IAM ì—­í•  ì •ì±…

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "bedrock:InvokeModel"
            ],
            "Resource": "arn:aws:bedrock:*:*:model/amazon.nova-*"
        },
        {
            "Effect": "Allow",
            "Action": [
                "s3:PutObject",
                "s3:GetObject"
            ],
            "Resource": "arn:aws:s3:::nova-english-audio-bucket/*"
        },
        {
            "Effect": "Allow",
            "Action": [
                "dynamodb:PutItem",
                "dynamodb:GetItem",
                "dynamodb:Query"
            ],
            "Resource": "arn:aws:dynamodb:*:*:table/nova-sessions"
        },
        {
            "Effect": "Allow",
            "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents"
            ],
            "Resource": "arn:aws:logs:*:*:*"
        }
    ]
}
```

#### 4. CloudFormation í…œí”Œë¦¿ (infrastructure.yaml)

```yaml
AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31

Resources:
  # Lambda í•¨ìˆ˜
  AudioProcessorFunction:
    Type: AWS::Serverless::Function
    Properties:
      FunctionName: nova-audio-processor
      Runtime: nodejs18.x
      Handler: index.handler
      Timeout: 30
      MemorySize: 512
      Environment:
        Variables:
          S3_BUCKET_NAME: !Ref AudioBucket
          DYNAMODB_TABLE_NAME: !Ref SessionTable
          AWS_REGION: !Ref AWS::Region
      Policies:
        - S3CrudPolicy:
            BucketName: !Ref AudioBucket
        - DynamoDBCrudPolicy:
            TableName: !Ref SessionTable
        - Statement:
            Effect: Allow
            Action: bedrock:InvokeModel
            Resource: 'arn:aws:bedrock:*:*:model/amazon.nova-*'
      Events:
        ApiEvent:
          Type: Api
          Properties:
            Path: /process-audio
            Method: post

  # S3 ë²„í‚·
  AudioBucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: !Sub '${AWS::StackName}-audio-bucket'
      LifecycleConfiguration:
        Rules:
          - Status: Enabled
            ExpirationInDays: 7
      CorsConfiguration:
        CorsRules:
          - AllowedHeaders: ['*']
            AllowedMethods: [GET, POST, PUT]
            AllowedOrigins: ['*']

  # DynamoDB í…Œì´ë¸”
  SessionTable:
    Type: AWS::DynamoDB::Table
    Properties:
      TableName: !Sub '${AWS::StackName}-sessions'
      BillingMode: PAY_PER_REQUEST
      AttributeDefinitions:
        - AttributeName: sessionId
          AttributeType: S
      KeySchema:
        - AttributeName: sessionId
          KeyType: HASH
      TimeToLiveSpecification:
        AttributeName: ttl
        Enabled: true

Outputs:
  ApiEndpoint:
    Description: 'API Gateway endpoint URL'
    Value: !Sub 'https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/process-audio'
```

### ë°°í¬ ë° ëª¨ë‹ˆí„°ë§

#### ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash
# deploy.sh

# SAM ë¹Œë“œ ë° ë°°í¬
sam build
sam deploy --guided --stack-name nova-english-service

# í™˜ê²½ ë³€ìˆ˜ í™•ì¸
aws lambda get-function-configuration --function-name nova-audio-processor
```

#### CloudWatch ëª¨ë‹ˆí„°ë§
```javascript
// ë©”íŠ¸ë¦­ ì „ì†¡ í•¨ìˆ˜
const cloudwatch = new AWS.CloudWatch();

async function sendMetrics(metricName, value, unit = 'Count') {
    const params = {
        Namespace: 'NovaEnglishService',
        MetricData: [{
            MetricName: metricName,
            Value: value,
            Unit: unit,
            Timestamp: new Date()
        }]
    };
    
    await cloudwatch.putMetricData(params).promise();
}
```

### ì„±ëŠ¥ ìµœì í™” ê³ ë ¤ì‚¬í•­

1. **Lambda ìµœì í™”**
   - ë©”ëª¨ë¦¬: 512MB (Nova ì²˜ë¦¬ìš©)
   - íƒ€ì„ì•„ì›ƒ: 30ì´ˆ
   - ë™ì‹œ ì‹¤í–‰: 100ê°œ ì œí•œ

2. **ë¹„ìš© ê´€ë¦¬**
   - S3 Lifecycle ì •ì±… (7ì¼ í›„ ì‚­ì œ)
   - DynamoDB TTL ì„¤ì •
   - Lambda ì˜ˆì•½ ë™ì‹œì„± ì„¤ì •

3. **ë³´ì•ˆ**
   - API Gatewayì—ì„œ ìš”ì²­ í¬ê¸° ì œí•œ
   - IAM ìµœì†Œ ê¶Œí•œ ì›ì¹™
   - VPC ì—”ë“œí¬ì¸íŠ¸ ì‚¬ìš© (ì„ íƒì‚¬í•­)

4. **í™•ì¥ì„±**
   - SQSë¥¼ í†µí•œ ë¹„ë™ê¸° ì²˜ë¦¬
   - Step Functionsë¡œ ì›Œí¬í”Œë¡œìš° ê´€ë¦¬
   - CloudFront CDN ì ìš©

**í…ŒìŠ¤íŠ¸ ìƒíƒœ:** âœ… ì™„ë£Œ
**ë‹¤ìŒ í…ŒìŠ¤íŠ¸:** QATester Agent