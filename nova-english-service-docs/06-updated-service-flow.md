# Nova ì˜ì–´ í•™ìŠµ ì„œë¹„ìŠ¤ - ì—…ë°ì´íŠ¸ëœ ì„œë¹„ìŠ¤ í”Œë¡œìš°

**ì—…ë°ì´íŠ¸ ë‚ ì§œ**: 2025ë…„ 1ì›”  
**ë²„ì „**: 2.0  
**ë³€ê²½ì‚¬í•­**: Nova Canvas ì‚¬ì „ ìƒì„± ì´ë¯¸ì§€ + Nova Sonic ìœ ë„ ëŒ€í™” ë°©ì‹

---

## 1. ì—…ë°ì´íŠ¸ëœ ì„œë¹„ìŠ¤ êµ¬ì¡°

### 1.1 í•µì‹¬ ë³€ê²½ì‚¬í•­
```
ê¸°ì¡´: ì‚¬ìš©ì ì„¤ëª… â†’ AI í”¼ë“œë°±
ë³€ê²½: ì‚¬ì „ ìƒì„± ì´ë¯¸ì§€ â†’ Nova Sonic ìœ ë„ ëŒ€í™” â†’ êµ¬ì²´ì  ì„œìˆ  ìœ ë„
```

### 1.2 ì„œë¹„ìŠ¤ í”Œë¡œìš°
```
1. ì‚¬ìš©ì ë¡œê·¸ì¸
2. ì¹´í…Œê³ ë¦¬ ì„ íƒ (Daily Life, Travel, Business, Social, Academic)
3. Nova Canvas ì‚¬ì „ ìƒì„± ì´ë¯¸ì§€ 5ê°œ ì¤‘ 1ê°œ ì œì‹œ
4. Nova Sonic ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ìœ ë„ ëŒ€í™” ì‹œì‘
5. ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ë¥¼ ì ì§„ì ìœ¼ë¡œ êµ¬ì²´ì  ì„œìˆ í•˜ë„ë¡ ìœ ë„
6. ëŒ€í™” ì¢…ë£Œ í›„ í•™ìŠµ ì§„ë„ ì €ì¥
```

---

## 2. Nova Canvas ì‚¬ì „ ì´ë¯¸ì§€ ìƒì„±

### 2.1 ì¹´í…Œê³ ë¦¬ë³„ ì´ë¯¸ì§€ ì„¸íŠ¸ (ê° 5ê°œ)

#### 2.1.1 Daily Life ì¹´í…Œê³ ë¦¬
```json
{
  "category": "daily_life",
  "images": [
    {
      "id": "daily_001",
      "title": "Family Morning Routine",
      "nova_canvas_prompt": "A busy family kitchen during morning rush hour. Parents preparing breakfast while children get ready for school. Multiple activities happening simultaneously - coffee brewing, toast popping up, backpacks being packed, lunch boxes prepared. Natural morning light, realistic family dynamics, organized chaos atmosphere.",
      "conversation_objectives": [
        "Describe multiple simultaneous actions",
        "Use present continuous tense",
        "Family relationship vocabulary",
        "Time management expressions"
      ],
      "guided_conversation_flow": [
        "What's the first thing you notice in this kitchen?",
        "Can you tell me what each family member is doing?",
        "What sounds do you think you would hear in this scene?",
        "How does this compare to your morning routine?"
      ]
    },
    {
      "id": "daily_002", 
      "title": "Weekend Grocery Shopping",
      "nova_canvas_prompt": "A diverse family shopping in a modern supermarket on weekend. Shopping cart filled with fresh produce, children helping select items, parents checking shopping list on phone. Busy aisles with other shoppers, promotional displays, seasonal products visible. Warm lighting, community atmosphere.",
      "conversation_objectives": [
        "Food and grocery vocabulary",
        "Family cooperation descriptions", 
        "Shopping process explanation",
        "Quantity and measurement terms"
      ]
    },
    {
      "id": "daily_003",
      "title": "Evening Cooking Together", 
      "nova_canvas_prompt": "Multi-generational family cooking dinner together in spacious kitchen. Grandmother teaching traditional recipe, parents preparing side dishes, teenager learning cooking techniques. Various ingredients, cooking utensils, steam and aromas visible. Warm golden hour lighting, bonding atmosphere.",
      "conversation_objectives": [
        "Cooking process vocabulary",
        "Generational interaction descriptions",
        "Sensory details (smell, sound, texture)",
        "Cultural tradition expressions"
      ]
    },
    {
      "id": "daily_004",
      "title": "Home Office Workspace",
      "nova_canvas_prompt": "Modern home office setup with person working remotely. Multiple monitors, video call in progress, coffee cup, plants, organized desk with documents. Natural light from window, professional yet comfortable atmosphere. Cat sleeping nearby, work-life balance elements visible.",
      "conversation_objectives": [
        "Remote work vocabulary",
        "Technology and equipment descriptions",
        "Work environment details",
        "Work-life balance concepts"
      ]
    },
    {
      "id": "daily_005",
      "title": "Family Game Night",
      "nova_canvas_prompt": "Living room scene with family playing board games on weekend evening. Multiple generations engaged in game, snacks and drinks on coffee table, cozy lighting, comfortable seating. Laughter and concentration expressions, game pieces and cards visible.",
      "conversation_objectives": [
        "Leisure activity vocabulary",
        "Emotion and expression descriptions",
        "Family bonding language",
        "Entertainment and fun expressions"
      ]
    }
  ]
}
```

#### 2.1.2 Travel ì¹´í…Œê³ ë¦¬
```json
{
  "category": "travel",
  "images": [
    {
      "id": "travel_001",
      "title": "Airport Departure Experience",
      "nova_canvas_prompt": "Busy international airport terminal with travelers checking in, security lines, departure boards showing multiple destinations. Diverse passengers with luggage, airport staff assisting, duty-free shops, cafes. Modern architecture, natural lighting, travel excitement atmosphere.",
      "conversation_objectives": [
        "Airport procedure vocabulary",
        "Travel preparation descriptions",
        "International travel terms",
        "Crowd and activity descriptions"
      ]
    },
    {
      "id": "travel_002",
      "title": "Hotel Check-in Experience", 
      "nova_canvas_prompt": "Elegant hotel lobby with travelers checking in at reception. Concierge providing local recommendations, luggage service, comfortable seating areas with other guests. Luxury interior design, welcoming atmosphere, hospitality service visible.",
      "conversation_objectives": [
        "Hospitality service vocabulary",
        "Accommodation descriptions",
        "Customer service interactions",
        "Luxury and comfort expressions"
      ]
    },
    {
      "id": "travel_003",
      "title": "Cultural Site Exploration",
      "nova_canvas_prompt": "Tourists exploring ancient temple with local guide explaining historical significance. Diverse group listening attentively, taking photos, traditional architecture details visible. Cultural artifacts, informational plaques, respectful tourism atmosphere.",
      "conversation_objectives": [
        "Cultural heritage vocabulary",
        "Historical description language",
        "Tourism and sightseeing terms",
        "Educational experience expressions"
      ]
    },
    {
      "id": "travel_004",
      "title": "Local Market Adventure",
      "nova_canvas_prompt": "Vibrant local market with tourists exploring food stalls, handicrafts, and local products. Vendors explaining items, cultural exchange happening, colorful displays, authentic atmosphere. Sensory-rich environment with various textures and colors.",
      "conversation_objectives": [
        "Market and shopping vocabulary",
        "Cultural exchange descriptions",
        "Sensory experience language",
        "Local culture expressions"
      ]
    },
    {
      "id": "travel_005",
      "title": "Transportation Hub",
      "nova_canvas_prompt": "Modern train station with international travelers navigating platforms, checking schedules, boarding trains. Multilingual signs, diverse passengers, efficient transportation system. Movement and journey atmosphere, connection and departure themes.",
      "conversation_objectives": [
        "Transportation vocabulary",
        "Navigation and direction language",
        "Public transport descriptions",
        "Journey and movement expressions"
      ]
    }
  ]
}
```

### 2.2 ì´ë¯¸ì§€ ìƒì„± API êµ¬í˜„
```typescript
// src/services/imageGeneration.ts
import { BedrockRuntimeClient, InvokeModelCommand } from '@aws-sdk/client-bedrock-runtime';

export class ImageGenerationService {
  private client: BedrockRuntimeClient;
  private modelId = 'amazon.nova-canvas-v1:0';

  async generateCategoryImages(category: string): Promise<string[]> {
    const prompts = this.getCategoryPrompts(category);
    const imageUrls: string[] = [];

    for (const prompt of prompts) {
      try {
        const command = new InvokeModelCommand({
          modelId: this.modelId,
          body: JSON.stringify({
            taskType: 'TEXT_IMAGE',
            textToImageParams: {
              text: prompt.nova_canvas_prompt,
              images: []
            },
            imageGenerationConfig: {
              numberOfImages: 1,
              height: 1024,
              width: 1024,
              cfgScale: 8.0,
              seed: Math.floor(Math.random() * 1000000)
            }
          })
        });

        const response = await this.client.send(command);
        const result = JSON.parse(response.body.transformToString());
        
        // S3ì— ì´ë¯¸ì§€ ì €ì¥
        const imageUrl = await this.saveImageToS3(result.images[0], prompt.id);
        imageUrls.push(imageUrl);
        
        // DynamoDBì— ë©”íƒ€ë°ì´í„° ì €ì¥
        await this.saveImageMetadata(prompt.id, imageUrl, prompt);
        
      } catch (error) {
        console.error(`Failed to generate image for ${prompt.id}:`, error);
      }
    }

    return imageUrls;
  }

  private getCategoryPrompts(category: string) {
    // ìœ„ì—ì„œ ì •ì˜í•œ ì¹´í…Œê³ ë¦¬ë³„ í”„ë¡¬í”„íŠ¸ ë°˜í™˜
    const categoryData = {
      daily_life: [/* daily life prompts */],
      travel: [/* travel prompts */],
      business: [/* business prompts */],
      social: [/* social prompts */],
      academic: [/* academic prompts */]
    };
    
    return categoryData[category] || [];
  }
}
```

---

## 3. Nova Sonic ìœ ë„ ëŒ€í™” ì‹œìŠ¤í…œ

### 3.1 ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ëŒ€í™” í”„ë¡¬í”„íŠ¸
```
You are Nova, an AI conversation guide helping Korean English learners describe images in detail through guided conversation.

ROLE: Conversation Guide (NOT Feedback Provider)
OBJECTIVE: Guide user to describe the image progressively more detailed through natural conversation

CONVERSATION STRATEGY:
1. Start with broad, open questions about the image
2. Gradually guide toward specific details
3. Ask follow-up questions to encourage elaboration
4. Use encouraging responses to maintain flow
5. Help user notice details they might miss
6. Build vocabulary naturally through conversation

CURRENT IMAGE: {image_title}
IMAGE DETAILS: {image_description}
USER LEVEL: {user_level}
CONVERSATION OBJECTIVES: {conversation_objectives}

CONVERSATION FLOW GUIDELINES:

OPENING (Broad Overview):
- "What's the first thing that catches your eye in this image?"
- "Can you give me a general description of what's happening here?"
- "What kind of scene is this?"

DEVELOPMENT (Specific Details):
- "Tell me more about [specific element user mentioned]"
- "What do you notice about the people in this scene?"
- "Can you describe the setting/environment?"
- "What details can you see in the background?"

DEEPENING (Sensory and Emotional):
- "What sounds do you think you would hear in this scene?"
- "How do the people seem to be feeling?"
- "What's the atmosphere like?"
- "If you were there, what would you notice first?"

EXPANSION (Personal Connection):
- "How does this compare to similar situations in your experience?"
- "What would you do in this situation?"
- "Does this remind you of anything?"

CONVERSATION STYLE:
- Natural, flowing conversation (not Q&A format)
- Build on user's responses
- Show genuine interest in their descriptions
- Use "I see..." "That's interesting..." "Tell me more about..."
- Gently introduce new vocabulary in context
- Maintain encouraging, supportive tone

AVOID:
- Correcting grammar or pronunciation during conversation
- Providing feedback or scores
- Interrupting the natural flow
- Making it feel like a test

EXAMPLE CONVERSATION FLOW:
Nova: "What's the first thing you notice in this kitchen scene?"
User: "I see family eating breakfast"
Nova: "A family having breakfast - that sounds lovely! Can you tell me more about the family members you see?"
User: "There are parents and two children"
Nova: "Four people altogether. What are they doing while they eat? I'm curious about the atmosphere around the table."
```

### 3.2 WebSocket ì‹¤ì‹œê°„ ëŒ€í™” êµ¬í˜„
```typescript
// src/services/conversationGuide.ts
import { Server as SocketIOServer } from 'socket.io';
import { NovaSonicService } from './novaSonic';

export class ConversationGuideService {
  private io: SocketIOServer;
  private novaSonic: NovaSonicService;

  constructor(server: any) {
    this.io = new SocketIOServer(server, {
      cors: { origin: process.env.CORS_ORIGIN?.split(',') }
    });
    this.novaSonic = new NovaSonicService();
    this.setupConversationHandlers();
  }

  private setupConversationHandlers() {
    this.io.on('connection', (socket) => {
      socket.on('start_conversation', async (data) => {
        const { imageId, userId, category } = data;
        
        // ì´ë¯¸ì§€ ì •ë³´ ì¡°íšŒ
        const imageData = await this.getImageData(imageId);
        
        // ëŒ€í™” ì‹œì‘ ë©”ì‹œì§€
        const openingMessage = await this.generateOpeningMessage(imageData);
        
        socket.emit('nova_message', {
          type: 'audio_text',
          audioUrl: openingMessage.audioUrl,
          text: openingMessage.text,
          timestamp: new Date().toISOString()
        });
      });

      socket.on('user_voice', async (data) => {
        try {
          const audioBuffer = Buffer.from(data.audio, 'base64');
          
          // Nova Sonicìœ¼ë¡œ ìŒì„± ì²˜ë¦¬ (ìœ ë„ ëŒ€í™” ëª¨ë“œ)
          const response = await this.novaSonic.processGuideConversation(audioBuffer, {
            imageContext: data.imageContext,
            conversationHistory: data.conversationHistory,
            userLevel: data.userLevel,
            conversationStage: data.conversationStage
          });

          socket.emit('nova_message', {
            type: 'guided_response',
            audioUrl: response.audioUrl,
            text: response.text,
            transcription: response.userTranscription,
            nextQuestion: response.suggestedNextQuestion,
            timestamp: new Date().toISOString()
          });

        } catch (error) {
          socket.emit('conversation_error', {
            message: 'Processing failed, please try again',
            error: error.message
          });
        }
      });

      socket.on('end_conversation', async (data) => {
        // ëŒ€í™” ì„¸ì…˜ ì €ì¥
        await this.saveConversationSession(data);
        
        socket.emit('conversation_complete', {
          message: 'Great conversation! Your descriptions were very detailed.',
          sessionSummary: await this.generateSessionSummary(data)
        });
      });
    });
  }

  private async generateOpeningMessage(imageData: any) {
    const openingPrompts = [
      `What's the first thing that catches your eye in this ${imageData.category} scene?`,
      `I'm looking at this interesting ${imageData.title.toLowerCase()} image with you. What do you see?`,
      `Let's explore this ${imageData.category} scene together. Can you give me your first impression?`
    ];

    const selectedPrompt = openingPrompts[Math.floor(Math.random() * openingPrompts.length)];
    
    return await this.novaSonic.generateVoiceResponse(selectedPrompt, {
      conversationStyle: 'opening',
      userLevel: 'adaptive',
      tone: 'encouraging'
    });
  }
}
```

### 3.3 Nova Sonic ìœ ë„ ëŒ€í™” ëª¨ë“œ
```typescript
// src/services/novaSonic.ts (ì—…ë°ì´íŠ¸)
export class NovaSonicService {
  async processGuideConversation(audioBuffer: Buffer, context: {
    imageContext: any;
    conversationHistory: any[];
    userLevel: string;
    conversationStage: string;
  }) {
    const systemPrompt = this.buildGuidePrompt(context);
    
    try {
      const input = {
        modelId: 'amazon.nova-sonic-v1:0',
        body: JSON.stringify({
          audio: audioBuffer.toString('base64'),
          conversationMode: 'guided_description',
          systemPrompt: systemPrompt,
          context: {
            imageDescription: context.imageContext.description,
            conversationObjectives: context.imageContext.objectives,
            conversationHistory: context.conversationHistory,
            currentStage: context.conversationStage
          },
          responseConfig: {
            style: 'conversational_guide',
            includeTranscription: true,
            generateFollowUp: true,
            maintainFlow: true
          }
        })
      };

      const response = await this.client.send(new InvokeModelCommand(input));
      const result = JSON.parse(response.body.transformToString());
      
      return {
        userTranscription: result.transcription,
        text: result.responseText,
        audioUrl: await this.saveAudioResponse(result.responseAudio),
        suggestedNextQuestion: result.followUpQuestion,
        conversationStage: result.nextStage
      };
    } catch (error) {
      throw new Error('Conversation processing failed');
    }
  }

  private buildGuidePrompt(context: any): string {
    return `
You are Nova, guiding a ${context.userLevel} English learner to describe an image through natural conversation.

IMAGE: ${context.imageContext.title}
CONVERSATION STAGE: ${context.conversationStage}
OBJECTIVES: ${context.imageContext.objectives.join(', ')}

GUIDE THE USER TO:
1. Notice and describe visual details progressively
2. Use appropriate vocabulary for their level
3. Elaborate on their initial observations
4. Make personal connections to the scene

CONVERSATION HISTORY:
${context.conversationHistory.map(h => `${h.speaker}: ${h.message}`).join('\n')}

RESPOND AS A CONVERSATION GUIDE:
- Build naturally on what the user just said
- Ask engaging follow-up questions
- Help them notice new details
- Encourage elaboration without being pushy
- Maintain supportive, interested tone
- Don't correct - just guide toward more description

CURRENT FOCUS: Help user describe the image in more detail through natural conversation flow.
    `;
  }
}
```

---

## 4. ì—…ë°ì´íŠ¸ëœ API ì—”ë“œí¬ì¸íŠ¸

### 4.1 ì¹´í…Œê³ ë¦¬ ì´ë¯¸ì§€ ì¡°íšŒ
```typescript
// GET /api/v1/categories/{category}/images
app.get('/api/v1/categories/:category/images', authMiddleware, async (req, res) => {
  try {
    const { category } = req.params;
    
    // í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ì‚¬ì „ ìƒì„±ëœ ì´ë¯¸ì§€ 5ê°œ ì¡°íšŒ
    const images = await docClient.query({
      TableName: 'nova-images',
      IndexName: 'category-index',
      KeyConditionExpression: 'category = :category',
      ExpressionAttributeValues: {
        ':category': category
      },
      Limit: 5
    }).promise();

    res.json({
      success: true,
      data: {
        category,
        images: images.Items.map(item => ({
          imageId: item.imageId,
          title: item.title,
          url: item.s3Url,
          conversationObjectives: item.conversationObjectives,
          estimatedDuration: '10-15 minutes'
        }))
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: { message: 'Failed to load category images' }
    });
  }
});
```

### 4.2 ëŒ€í™” ì„¸ì…˜ ì‹œì‘
```typescript
// POST /api/v1/conversations/start
app.post('/api/v1/conversations/start', authMiddleware, async (req, res) => {
  try {
    const { imageId } = req.body;
    const userId = req.user.userId;
    
    // ì´ë¯¸ì§€ ì •ë³´ ì¡°íšŒ
    const imageData = await docClient.get({
      TableName: 'nova-images',
      Key: { imageId }
    }).promise();

    // ëŒ€í™” ì„¸ì…˜ ìƒì„±
    const sessionId = `conv_${Date.now()}_${userId}`;
    
    await docClient.put({
      TableName: 'nova-conversations',
      Item: {
        sessionId,
        userId,
        imageId,
        startTime: new Date().toISOString(),
        status: 'active',
        conversationHistory: []
      }
    }).promise();

    res.json({
      success: true,
      data: {
        sessionId,
        imageData: imageData.Item,
        websocketUrl: `wss://api.nova-english.com/ws/conversations/${sessionId}`,
        instructions: 'Connect to WebSocket to start real-time conversation'
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: { message: 'Failed to start conversation' }
    });
  }
});
```

---

## 5. í”„ë¡ íŠ¸ì—”ë“œ ì—…ë°ì´íŠ¸

### 5.1 ì¹´í…Œê³ ë¦¬ ì„ íƒ ì»´í¬ë„ŒíŠ¸
```typescript
// src/components/CategorySelection.tsx
import React, { useState, useEffect } from 'react';
import { Grid, Card, CardMedia, CardContent, Typography, Button } from '@mui/material';
import { categoryAPI } from '../services/api';

const categories = [
  { id: 'daily_life', name: 'Daily Life', icon: 'ğŸ ' },
  { id: 'travel', name: 'Travel', icon: 'âœˆï¸' },
  { id: 'business', name: 'Business', icon: 'ğŸ’¼' },
  { id: 'social', name: 'Social', icon: 'ğŸ‘¥' },
  { id: 'academic', name: 'Academic', icon: 'ğŸ“š' }
];

export const CategorySelection: React.FC = () => {
  const [selectedCategory, setSelectedCategory] = useState<string>('');
  const [categoryImages, setCategoryImages] = useState<any[]>([]);

  const handleCategorySelect = async (categoryId: string) => {
    setSelectedCategory(categoryId);
    
    try {
      const response = await categoryAPI.getCategoryImages(categoryId);
      setCategoryImages(response.data.images);
    } catch (error) {
      console.error('Failed to load category images:', error);
    }
  };

  return (
    <div>
      {!selectedCategory ? (
        <Grid container spacing={3}>
          {categories.map((category) => (
            <Grid item xs={12} sm={6} md={4} key={category.id}>
              <Card 
                sx={{ cursor: 'pointer', '&:hover': { transform: 'scale(1.05)' } }}
                onClick={() => handleCategorySelect(category.id)}
              >
                <CardContent sx={{ textAlign: 'center', py: 4 }}>
                  <Typography variant="h1" sx={{ fontSize: '4rem', mb: 2 }}>
                    {category.icon}
                  </Typography>
                  <Typography variant="h5" gutterBottom>
                    {category.name}
                  </Typography>
                  <Typography variant="body2" color="text.secondary">
                    5 conversation scenarios
                  </Typography>
                </CardContent>
              </Card>
            </Grid>
          ))}
        </Grid>
      ) : (
        <ImageSelection 
          category={selectedCategory}
          images={categoryImages}
          onBack={() => setSelectedCategory('')}
        />
      )}
    </div>
  );
};
```

### 5.2 ì‹¤ì‹œê°„ ëŒ€í™” ì»´í¬ë„ŒíŠ¸
```typescript
// src/components/ConversationSession.tsx
import React, { useState, useEffect, useRef } from 'react';
import { Box, Card, CardMedia, IconButton, Typography, Paper } from '@mui/material';
import { MicIcon, StopIcon } from '@mui/icons-material';
import { useWebSocket } from '../hooks/useWebSocket';
import { useVoiceRecording } from '../hooks/useVoiceRecording';

interface ConversationSessionProps {
  sessionId: string;
  imageData: any;
}

export const ConversationSession: React.FC<ConversationSessionProps> = ({ 
  sessionId, 
  imageData 
}) => {
  const [conversationHistory, setConversationHistory] = useState<any[]>([]);
  const [isNovaResponding, setIsNovaResponding] = useState(false);
  
  const { socket, isConnected } = useWebSocket(`/conversations/${sessionId}`);
  const { isRecording, startRecording, stopRecording, audioBlob } = useVoiceRecording();

  useEffect(() => {
    if (socket && isConnected) {
      // ëŒ€í™” ì‹œì‘
      socket.emit('start_conversation', {
        imageId: imageData.imageId,
        category: imageData.category
      });

      // Nova ë©”ì‹œì§€ ìˆ˜ì‹ 
      socket.on('nova_message', (message) => {
        setConversationHistory(prev => [...prev, {
          speaker: 'nova',
          text: message.text,
          audioUrl: message.audioUrl,
          timestamp: message.timestamp
        }]);
        setIsNovaResponding(false);
        
        // ìë™ìœ¼ë¡œ Nova ìŒì„± ì¬ìƒ
        if (message.audioUrl) {
          playAudio(message.audioUrl);
        }
      });
    }
  }, [socket, isConnected]);

  useEffect(() => {
    if (audioBlob && socket) {
      // ì‚¬ìš©ì ìŒì„±ì„ Novaì—ê²Œ ì „ì†¡
      setIsNovaResponding(true);
      
      const reader = new FileReader();
      reader.onload = () => {
        const audioData = reader.result?.toString().split(',')[1]; // base64 ë°ì´í„°
        
        socket.emit('user_voice', {
          audio: audioData,
          imageContext: imageData,
          conversationHistory: conversationHistory,
          conversationStage: determineConversationStage()
        });
      };
      reader.readAsDataURL(audioBlob);
    }
  }, [audioBlob]);

  const playAudio = (audioUrl: string) => {
    const audio = new Audio(audioUrl);
    audio.play().catch(console.error);
  };

  const determineConversationStage = () => {
    const userMessages = conversationHistory.filter(m => m.speaker === 'user').length;
    if (userMessages <= 2) return 'opening';
    if (userMessages <= 5) return 'development';
    if (userMessages <= 8) return 'deepening';
    return 'expansion';
  };

  return (
    <Box sx={{ maxWidth: 1000, mx: 'auto', p: 2 }}>
      {/* ì´ë¯¸ì§€ í‘œì‹œ */}
      <Card sx={{ mb: 3 }}>
        <CardMedia
          component="img"
          height="400"
          image={imageData.url}
          alt={imageData.title}
        />
        <Box sx={{ p: 2 }}>
          <Typography variant="h6">{imageData.title}</Typography>
          <Typography variant="body2" color="text.secondary">
            Have a conversation with Nova about this image
          </Typography>
        </Box>
      </Card>

      {/* ëŒ€í™” ê¸°ë¡ */}
      <Paper sx={{ mb: 3, p: 2, maxHeight: 300, overflow: 'auto' }}>
        {conversationHistory.map((message, index) => (
          <Box key={index} sx={{ mb: 2 }}>
            <Typography 
              variant="subtitle2" 
              color={message.speaker === 'nova' ? 'primary' : 'secondary'}
            >
              {message.speaker === 'nova' ? 'ğŸ¤– Nova' : 'ğŸ‘¤ You'}
            </Typography>
            <Typography variant="body1">
              {message.text}
            </Typography>
            {message.audioUrl && (
              <audio controls style={{ width: '100%', marginTop: '8px' }}>
                <source src={message.audioUrl} type="audio/wav" />
              </audio>
            )}
          </Box>
        ))}
        
        {isNovaResponding && (
          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
            <Typography variant="body2" color="text.secondary">
              Nova is thinking...
            </Typography>
          </Box>
        )}
      </Paper>

      {/* ìŒì„± ì…ë ¥ */}
      <Box sx={{ textAlign: 'center' }}>
        <IconButton
          size="large"
          color={isRecording ? "error" : "primary"}
          onClick={isRecording ? stopRecording : startRecording}
          disabled={isNovaResponding}
          sx={{ 
            width: 80, 
            height: 80,
            border: 2,
            borderColor: isRecording ? 'error.main' : 'primary.main'
          }}
        >
          {isRecording ? <StopIcon sx={{ fontSize: 40 }} /> : <MicIcon sx={{ fontSize: 40 }} />}
        </IconButton>
        
        <Typography variant="body2" sx={{ mt: 1 }}>
          {isRecording ? 'Recording... Click to stop' : 'Click to start speaking'}
        </Typography>
      </Box>
    </Box>
  );
};
```

---

## 6. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸

### 6.1 ëŒ€í™” ì„¸ì…˜ í…Œì´ë¸”
```json
{
  "TableName": "nova-conversations",
  "Schema": {
    "sessionId": "String (PK)",
    "userId": "String (GSI)",
    "imageId": "String",
    "category": "String",
    "startTime": "ISO8601",
    "endTime": "ISO8601",
    "conversationHistory": [
      {
        "speaker": "nova|user",
        "message": "String",
        "audioUrl": "String",
        "timestamp": "ISO8601"
      }
    ],
    "conversationStages": [
      "opening", "development", "deepening", "expansion", "closing"
    ],
    "totalTurns": "Number",
    "userEngagement": "Number",
    "status": "active|completed|abandoned"
  }
}
```

ì´ë ‡ê²Œ ì—…ë°ì´íŠ¸ëœ ì„œë¹„ìŠ¤ëŠ” Nova Canvasë¡œ ë¯¸ë¦¬ ìƒì„±ëœ ê³ í’ˆì§ˆ ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ, Nova Sonicì´ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ì‚¬ìš©ìì™€ ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”ë¥¼ ë‚˜ëˆ„ë©° ì ì§„ì ìœ¼ë¡œ ë” êµ¬ì²´ì ì¸ ì´ë¯¸ì§€ ì„œìˆ ì„ ìœ ë„í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.